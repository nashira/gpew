<!DOCTYPE html>
<html lang='en'>
<head>
  <title>three.js webgl - particles</title>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0'>
  <style>
  body {
    background-color: #000000;
    margin: 0px;
    overflow: hidden;
    font-family:Monospace;
    font-size:13px;
    text-align:center;
    font-weight: bold;
    text-align:center;
  }

  </style>
</head>
<body>
  <canvas id="canvas" width="500" height="500"></canvas>

  <script src='../src/program.js'></script>
  <script src='../src/databuffer.js'></script>
  <script src='../src/rendertarget.js'></script>

  <script>
    var gl = document.getElementById('canvas').getContext('webgl');


    var vertextShader = [
      'precision highp float;',
      'attribute vec2 position;',
      'attribute vec3 color;',
      'varying vec3 vColor;',
      'void main() {',
      '  vColor = color;',
      '  gl_Position = vec4(position * 2. - 1., 0.0, 1.0);',
      '}'
      ].join('\n');

    var fragmentShader = [
      'precision highp float;',
      'varying vec3 vColor;',
      'void main() {',
      '  gl_FragColor = vec4(vColor, 1.);',
      '}'
      ].join('\n');

    var position = new DataBuffer(2, 6);
    position.setBuffer(new Float32Array([0,1,0,0,1,0,0,1,1,0,1,1]));

    var color = new DataBuffer(3, 6);
    var ca = []; for(var i = 0; i < 18; i++) ca.push(Math.random());
    color.setBuffer(new Float32Array(ca));

    var program = new Program(vertextShader, fragmentShader);
    program.addAttribute('position', 2, gl.FLOAT);
    program.setAttributeBuffer('position', position);

    program.addAttribute('color', 3, gl.FLOAT);
    program.setAttributeBuffer('color', color);

    // var renderTarget = new RenderTarget(256, 256);
    // program.setRenderTarget(renderTarget, true)
    program.draw(0, 6);
  </script>

</body>
</html>
